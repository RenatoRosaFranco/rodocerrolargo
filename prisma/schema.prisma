// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Advertisement {
  id               String   @id @default(cuid())
  imageUrl         String
  destinationLink  String
  bannerType       String   // 'top', 'sidebar-left', 'sidebar-right', 'footer', 'popup'
  startDate        DateTime
  endDate          DateTime
  status           String   @default("pending") // 'pending', 'active', 'paused', 'expired', 'rejected'
  priority         Int      @default(0)
  views            Int      @default(0)
  clicks           Int      @default(0)
  approvedBy       String?
  approvalDate     DateTime?
  rejectionReason  String?

  // Popup specific settings
  popupDisplayAfter Int     @default(5)
  popupFrequency    String  @default("once-per-session") // 'always', 'once-per-session', 'once-per-day'

  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([bannerType, status, startDate, endDate])
  @@index([status, priority])
}

model TaxiDriver {
  id               String   @id @default(cuid())
  fullName         String
  email            String
  phone            String
  whatsapp         String
  description      String?
  photo            String?
  status           String   @default("pending") // 'pending', 'approved', 'rejected'
  rejectionReason  String?
  registrationDate DateTime @default(now())
  approvalDate     DateTime?
  approvedBy       String?

  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([status, registrationDate])
}

model Feedback {
  id         String   @id @default(cuid())
  rating     Int
  message    String
  ipAddress  String?
  userAgent  String?
  createdAt  DateTime @default(now())
}
